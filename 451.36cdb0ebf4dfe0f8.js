"use strict";(self.webpackChunkproyectoCoderArana=self.webpackChunkproyectoCoderArana||[]).push([[451],{451:(ht,A,s)=>{s.r(A),s.d(A,{InscripcionesModule:()=>gt});var _=s(6895),T=s(6582),u=s(7155),h=s(6474),p=s(9076),x=s(3848),a=s(4006),l=s(5412),b=s(4132),t=s(4650),m=s(9653),I=s(4859),f=s(9549),y=s(4385),N=s(3238);function F(i,o){if(1&i&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.AsE("",n.nombre," (",n.comision,")")}}let Y=(()=>{class i{constructor(n,e,c,r,g){this.dialogRef=n,this.inscripcion=e,this.storeCursos=c,this.storeSesion=r,this.storeInscripciones=g,this.formulario=new a.cw({curso:new a.NI(this.inscripcion.curso)})}ngOnInit(){this.cursos$=this.storeCursos.select(b.Nt),this.storeSesion.select(h.F).subscribe(n=>{this.usuarioActivo=n.usuarioActivo})}cancelar(){this.dialogRef.close()}editar(){this.storeInscripciones.dispatch((0,p.se)({inscripcion:{id:this.inscripcion.id,usuario:this.inscripcion.usuario,alumno:this.inscripcion.alumno,curso:this.formulario.value.curso}})),this.dialogRef.close()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.so),t.Y36(l.WI),t.Y36(m.yh),t.Y36(m.yh),t.Y36(m.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editar-inscripciones"]],decls:16,vars:4,consts:[["mat-dialog-title","",1,"tituloDialog"],["mat-dialog-content","",1,"mt-4"],[3,"formGroup"],["appearance","fill",1,"fill",2,"width","100%"],["formControlName","curso"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"d-flex","justify-content-end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],[3,"value"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Editar Curso"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Seleccione un curso"),t.qZA(),t.TgZ(7,"mat-select",4),t.YNc(8,F,2,3,"mat-option",5),t.ALo(9,"async"),t.qZA()()()(),t.TgZ(10,"div",6)(11,"div")(12,"button",7),t.NdJ("click",function(){return e.cancelar()}),t._uU(13,"Cancelar"),t.qZA(),t.TgZ(14,"button",8),t.NdJ("click",function(){return e.editar()}),t._uU(15,"Editar"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",e.formulario),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,2,e.cursos$)))},dependencies:[_.sg,I.lW,f.KE,f.hX,l.uh,l.xY,l.H8,y.gD,N.ey,a._Y,a.JJ,a.JL,a.sg,a.u,_.Ov]}),i})();var L=s(7974),Q=s(2268);function S(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.AsE("",n.nombre," (",n.comision,")")}}function D(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.lnq("",n.usuario," (",n.nombre," ",n.apellido,")")}}function w(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"mat-form-field",9)(3,"mat-label"),t._uU(4,"Seleccione un alumno"),t.qZA(),t.TgZ(5,"mat-select",10),t.NdJ("ngModelChange",function(c){t.CHM(n);const r=t.oxw(2);return t.KtG(r.alumnoSeleccionado=c)}),t.YNc(6,D,2,4,"mat-option",11),t.ALo(7,"async"),t.qZA()()()()}if(2&i){const n=t.oxw(2);t.xp6(5),t.Q6J("ngModel",n.alumnoSeleccionado),t.xp6(1),t.Q6J("ngForOf",t.lcZ(7,2,n.alumnos$))}}function E(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"mat-form-field",9)(5,"mat-label"),t._uU(6,"Seleccione un curso"),t.qZA(),t.TgZ(7,"mat-select",10),t.NdJ("ngModelChange",function(c){t.CHM(n);const r=t.oxw();return t.KtG(r.cursoSeleccionado=c)}),t.YNc(8,S,2,3,"mat-option",11),t.ALo(9,"async"),t.qZA()()()(),t.YNc(10,w,8,4,"div",12),t.qZA()()}if(2&i){const n=o.ngIf,e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.cursoSeleccionado),t.xp6(1),t.Q6J("ngForOf",t.lcZ(9,3,e.cursos$)),t.xp6(2),t.Q6J("ngIf",null==n.usuarioActivo?null:n.usuarioActivo.admin)}}let M=(()=>{class i{constructor(n,e,c,r,g){this.dialogRef=n,this.storeInscripciones=e,this.storeCursos=c,this.storeAlumnos=r,this.storeSesion=g,this.formulario=new a.cw({alumno:new a.NI("",[a.kI.required]),curso:new a.NI("",[a.kI.required])})}ngOnInit(){this.sesion$=this.storeSesion.select(h.F),this.storeSesion.select(h.F).subscribe(n=>{this.usuarioActivo=n.usuarioActivo}),this.cursos$=this.storeCursos.select(b.Nt),this.alumnos$=this.storeAlumnos.select(Q.Wg)}cancelar(){this.dialogRef.close()}agregar(n,e){this.storeInscripciones.dispatch((0,p.ZC)({inscripcion:{id:1,alumno:e,curso:n||this.usuarioActivo,usuario:this.usuarioActivo}})),this.dialogRef.close()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.so),t.Y36(m.yh),t.Y36(m.yh),t.Y36(m.yh),t.Y36(m.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-agregar-inscripciones"]],decls:10,vars:3,consts:[["mat-dialog-title","",1,"tituloDialog"],["mat-dialog-content","","class","mt-4",4,"ngIf"],["mat-dialog-actions","",1,"d-flex","justify-content-end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-dialog-content","",1,"mt-4"],[1,"d-flex","flex-column"],[1,"row"],[1,"col-md-12"],["appearance","fill",1,"fill",2,"width","100%"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"value"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Crear Curso"),t.qZA(),t.YNc(2,E,11,5,"div",1),t.ALo(3,"async"),t.TgZ(4,"div",2)(5,"div")(6,"button",3),t.NdJ("click",function(){return e.cancelar()}),t._uU(7,"Cancelar"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return e.agregar(e.cursoSeleccionado,e.alumnoSeleccionado)}),t._uU(9,"Agregar"),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,e.sesion$)))},dependencies:[_.sg,_.O5,I.lW,f.KE,f.hX,l.uh,l.xY,l.H8,y.gD,N.ey,a.JJ,a.On,_.Ov]}),i})(),O=(()=>{class i{constructor(n,e,c){this.dialogRef=n,this.inscripcion=e,this.storeInscripciones=c,this.storeInscripciones.dispatch((0,p.pR)())}ngOnInit(){}cancelar(){this.dialogRef.close()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.so),t.Y36(l.WI),t.Y36(m.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detalle-inscripciones"]],decls:9,vars:3,consts:[["mat-dialog-title","",1,"tituloDialog"],["mat-dialog-actions","",1,"d-flex","justify-content-end"],["mat-button","",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Detalle Inscripcion"),t.qZA(),t.TgZ(2,"pre"),t._uU(3),t.ALo(4,"json"),t.qZA(),t.TgZ(5,"div",1)(6,"div")(7,"button",2),t.NdJ("click",function(){return e.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("  ",t.lcZ(4,1,e.inscripcion),"\n"))},dependencies:[I.lW,l.uh,l.H8,_.Ts]}),i})();var R=s(7392),q=s(4144),G=s(1572);function k(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(2);return t.KtG(c.crear())}),t.TgZ(1,"mat-icon",13),t._uU(2,"add_circle"),t.qZA(),t._uU(3," Agregar Inscripcion "),t.qZA()}}function W(i,o){1&i&&t._UZ(0,"mat-spinner")}function H(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Nombre"),t.qZA())}function B(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.alumno.nombre)}}function K(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Apellido"),t.qZA())}function j(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.alumno.apellido)}}function X(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Curso"),t.qZA())}function z(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.curso.nombre)}}function V(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Comision"),t.qZA())}function P(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.curso.comision)}}function tt(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Creado por"),t.qZA())}function nt(i,o){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const n=o.$implicit;t.xp6(1),t.Oqu(n.usuario.usuario)}}function it(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Acciones"),t.qZA())}function ot(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(n);const c=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.editar(c))}),t.TgZ(1,"mat-icon",31),t._uU(2,"edit"),t.qZA()()}}function et(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(n);const c=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.eliminar(c))}),t.TgZ(1,"mat-icon",32),t._uU(2,"delete"),t.qZA()()}}function ct(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"td",26)(1,"div",27)(2,"button",28),t.NdJ("click",function(){const r=t.CHM(n).$implicit,g=t.oxw(3);return t.KtG(g.detalle(r))}),t.TgZ(3,"mat-icon",29),t._uU(4,"visibility"),t.qZA()(),t.YNc(5,ot,3,0,"button",30),t.YNc(6,et,3,0,"button",30),t.qZA()()}if(2&i){const n=t.oxw(2).ngIf;t.xp6(5),t.Q6J("ngIf",null==n.usuarioActivo?null:n.usuarioActivo.admin),t.xp6(1),t.Q6J("ngIf",null==n.usuarioActivo?null:n.usuarioActivo.admin)}}function st(i,o){1&i&&t._UZ(0,"tr",33)}function rt(i,o){1&i&&t._UZ(0,"tr",34)}function at(i,o){if(1&i&&(t.TgZ(0,"table",14),t.ynx(1,15),t.YNc(2,H,2,0,"th",16),t.YNc(3,B,2,1,"td",17),t.BQk(),t.ynx(4,18),t.YNc(5,K,2,0,"th",16),t.YNc(6,j,2,1,"td",17),t.BQk(),t.ynx(7,19),t.YNc(8,X,2,0,"th",16),t.YNc(9,z,2,1,"td",17),t.BQk(),t.ynx(10,20),t.YNc(11,V,2,0,"th",16),t.YNc(12,P,2,1,"td",17),t.BQk(),t.ynx(13,21),t.YNc(14,tt,2,0,"th",16),t.YNc(15,nt,2,1,"td",17),t.BQk(),t.ynx(16,22),t.YNc(17,it,2,0,"th",16),t.YNc(18,ct,7,2,"td",17),t.BQk(),t.YNc(19,st,1,0,"tr",23),t.YNc(20,rt,1,0,"tr",24),t.qZA()),2&i){const n=t.oxw(2);t.Q6J("dataSource",n.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",n.columnas),t.xp6(1),t.Q6J("matRowDefColumns",n.columnas)}}const lt=function(){return[5,10,20]};function pt(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"div",1)(1,"h2",2),t._uU(2,"Listado de Inscripciones"),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7,"Filtrar"),t.qZA(),t.TgZ(8,"input",6,7),t.NdJ("keyup",function(c){t.CHM(n);const r=t.oxw();return t.KtG(r.applyFilter(c))}),t.qZA()()(),t.YNc(10,k,4,0,"button",8),t.qZA(),t.YNc(11,W,1,0,"mat-spinner",9),t.ALo(12,"async"),t.YNc(13,at,21,3,"table",10),t.ALo(14,"async"),t._UZ(15,"mat-paginator",11),t.qZA()}if(2&i){const n=o.ngIf,e=t.oxw();t.xp6(10),t.Q6J("ngIf",null==n.usuarioActivo?null:n.usuarioActivo.admin),t.xp6(1),t.Q6J("ngIf",t.lcZ(12,4,e.cargando$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(14,6,e.cargando$)),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(8,lt))}}let U=(()=>{class i{constructor(n,e,c){this.storeInscripciones=n,this.storeSesion=e,this.dialog=c,this.columnas=["nombre","apellido","curso","comision","usuario","acciones"],this.storeInscripciones.dispatch((0,p.pR)())}ngOnInit(){this.cargando$=this.storeInscripciones.select(x.Dh),this.sesion$=this.storeSesion.select(h.F),this.suscripcionInscripciones=this.storeInscripciones.select(x.Fv).subscribe(n=>{this.dataSource=new u.by(n),this.dataSource.paginator=this.paginator})}ngOnDestroy(){}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}crear(){this.dialog.open(M,{minWidth:"400px"})}detalle(n){this.dialog.open(O,{minWidth:"400px",data:n})}editar(n){this.dialog.open(Y,{minWidth:"400px",data:n})}eliminar(n){this.storeInscripciones.dispatch((0,p.Fy)({inscripcion:n}))}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(m.yh),t.Y36(m.yh),t.Y36(l.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lista-incripciones"]],viewQuery:function(n,e){if(1&n&&t.Gf(L.NW,5),2&n){let c;t.iGM(c=t.CRH())&&(e.paginator=c.first)}},decls:2,vars:3,consts:[["class","row col-md-9",4,"ngIf"],[1,"row","col-md-9"],[1,"titulos"],[1,"d-flex","align-items-center"],[1,"row","col-md-4"],["appearance","fill"],["matInput","","autocomplete","off","placeholder","",3,"keyup"],["input",""],["mat-raised-button","","class","botonAgregar colorVerde ms-auto",3,"click",4,"ngIf"],[4,"ngIf"],["class","lista-tabla","mat-table","",3,"dataSource",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-raised-button","",1,"botonAgregar","colorVerde","ms-auto",3,"click"],[1,"botonVerde"],["mat-table","",1,"lista-tabla",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","apellido"],["matColumnDef","curso"],["matColumnDef","comision"],["matColumnDef","usuario"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex","justify-content-center"],["mat-icon-button","",3,"click"],[1,"colorIconoVer"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"colorIconoEditar"],[1,"colorIconoEliminar"],["mat-header-row",""],["mat-row",""]],template:function(n,e){1&n&&(t.YNc(0,pt,16,9,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.sesion$))},dependencies:[_.O5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,R.Hw,I.lW,f.KE,f.hX,q.Nt,G.Ou,L.NW,_.Ov],styles:[".botonAgregar[_ngcontent-%COMP%]{background-color:#20b2aa;color:#fff}"]}),i})();const ut=[{path:"lista",component:U,children:[{path:"editar",component:Y},{path:"lista",component:U}]}];let mt=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(ut),T.Bz]}),i})();var dt=s(4466),d=s(493),v=s(4351),C=s(4004),Z=s(2340),_t=s(529);let J=(()=>{class i{constructor(n){this.http=n}obtenerInscripciones(){return this.http.get(`${Z.N.api}/inscripciones`)}agregarInscripcion(n){return this.http.post(`${Z.N.api}/inscripciones`,n)}editarInscripcion(n){return this.http.put(`${Z.N.api}/inscripciones/${n.id}`,n)}eliminarInscripcion(n){return this.http.delete(`${Z.N.api}/inscripciones/${n.id}`)}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(_t.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ft=(()=>{class i{constructor(n,e){this.actions$=n,this.inscripciones=e,this.cargarInscripciones$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(p.pR),(0,v.b)(()=>this.inscripciones.obtenerInscripciones().pipe((0,C.U)(c=>p.cf({inscripciones:c})))))),this.agregarInscripciones$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(p.ZC),(0,v.b)(({inscripcion:c})=>this.inscripciones.agregarInscripcion(c).pipe((0,C.U)(r=>p.pR()))))),this.eliminarInscripcion$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(p.Fy),(0,v.b)(({inscripcion:c})=>this.inscripciones.eliminarInscripcion(c).pipe((0,C.U)(r=>p.pR()))))),this.editarInscripcion$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(p.se),(0,v.b)(({inscripcion:c})=>this.inscripciones.editarInscripcion(c).pipe((0,C.U)(r=>p.pR())))))}}return i.\u0275fac=function(n){return new(n||i)(t.LFG(d.eX),t.LFG(J))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var $=s(8147);let gt=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[J],imports:[_.ez,mt,dt.m,m.Aw.forFeature($.Vy,$.I6),d.sQ.forFeature([ft])]}),i})()}}]);